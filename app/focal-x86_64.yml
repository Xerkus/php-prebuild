# appimage-builder recipe see https://appimage-builder.readthedocs.io for details
version: 1
script:
  - rm -rf AppDir
  - mkdir AppDir
  - tar xf php.tar.xz --strip 1 -C AppDir

AppDir:
  path: /AppDir
  app_info:
    id: com.github.containerbase.php
    name: php
    version: VERSION
    exec: bin/php
    exec_args: $@
  apt:
    arch:
      - amd64
    allow_unauthenticated: true
    sources:
      - sourceline: deb http://archive.ubuntu.com/ubuntu/ focal main restricted universe
        key_url: 'http://keyserver.ubuntu.com/pks/lookup?op=get&search=0x871920D1991BC93C'
      - sourceline: deb http://archive.ubuntu.com/ubuntu/ focal-updates main restricted universe
        key_url: 'http://keyserver.ubuntu.com/pks/lookup?op=get&search=0x871920D1991BC93C'
      - sourceline: deb http://security.ubuntu.com/ubuntu/ focal-security main restricted universe
        key_url: 'http://keyserver.ubuntu.com/pks/lookup?op=get&search=0x871920D1991BC93C'
    include:
      - libjpeg-turbo8
      - libmcrypt4
      - libonig5
      - libpng16-16
      - libtidy5deb1
      - libxslt1.1
      - libzip5
  files:
    include: []
    exclude:
      - usr/share/man
      - usr/share/doc/*/README.*
      - usr/share/doc/*/changelog.*
      - usr/share/doc/*/NEWS.*
      - usr/share/doc/*/TODO.*
#  runtime:
#    env:
#      APPDIR_LIBRARY_PATH: '$APPDIR/usr/lib/x86_64-linux-gnu:$APPDIR/lib/x86_64-linux-gnu'
# test:
#   fedora-30:
#     image: appimagecrafters/tests-env:fedora-30
#     command: ./AppRun
#   debian-stable:
#     image: appimagecrafters/tests-env:debian-stable
#     command: ./AppRun
#   archlinux-latest:
#     image: appimagecrafters/tests-env:archlinux-latest
#     command: ./AppRun
#   centos-7:
#     image: appimagecrafters/tests-env:centos-7
#     command: ./AppRun
#   ubuntu-xenial:
#     image: appimagecrafters/tests-env:ubuntu-xenial
#     command: ./AppRun
AppImage:
  arch: x86_64
  update-information: None
